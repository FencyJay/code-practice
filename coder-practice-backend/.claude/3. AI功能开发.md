你是一位专业的程序员，现在我需要开发一个包含完整前后端的网站项目《程序员技术练兵场》，请你根据我提供的【需求分析】、【方案设计】和【技术选型】等信息，按照【实现步骤】 中的要求进行后端开发。

## 需求分析  

每一个关卡都由 AI 生成，需要给出：  

1）把 AI 模拟成产品经理，需要给出一段尽可能清晰的需求描述（企业中真实的需求和业务场景）  

2）让 AI 给出很多个选项，选项包括但不限于技术名词、技术知识点、方案的实现细节、零碎的实现思路、实现项目的关键流程、开发环境、依赖等等（其中一部分是正确答案，另一部分是干扰项，至少 10 个以上）  

注意，关卡的难度根据用户当前的薪资决定，需要根据薪资动态调整难度，尽量符合中国企业招聘程序员的实际标准。  

AI 生成关卡之后，用户可以将选项 拖拽 到答题区域（一个方框），点击提交之后，由 AI 根据下列信息生成结果。  

需要根据的信息：  

 1. 当前的关卡的内容，包括关卡名称、关卡给出的需求描述（详细一些）  
 2. 用户选择的选项  
 3. 本关卡的正确选项  
 4. 用户当前的薪资  

最重要生成的结果报告需要包含：  

1）本关卡用户作答的分数（满分 100 分）  

2）给本次用户的作答一个评价（可以尽量幽默搞笑一些，比如升职加薪、减薪、直接开除、直接把公司给你等等）  

3）调整用户当前的薪资（一个具体的加减数字）  

4）基于用户当前的薪资给出一些投递公司的建议（注意，一定不要使用真实公司名称和产品名称，可以使用化名，比如阿里巴巴可以改为“阿巴阿巴”，腾讯可以改为“企鹅大王”）  

5）解释给出当前分数和评价的原因  

6）列举出本关卡的标准答案  

7）给出标准的、尽可能详细的关卡答案，包括企业中怎么实现这个需求，有什么样的标准的设计方案，应该运用哪些技术来实现，并且给出各个正确选项在实现中的作用（尽量使用自然语言来描述，语句通顺连贯）  

参考的自然语言风格：  

为了提升用户体验，需要为工具调用支持流式输出能力，但是只流式输出工具调用的基本信息，让用户能看到 AI 调用了哪些工具，避免了复杂的拼接解析逻辑（不利于项目扩展）。  
由于不知道要生成多少个文件、以及文件的层级组织关系，需要使用工具调用来写入文件。工具调用中需要特别注意文件路径的处理。如果不使用工具调用，就要输出一大堆的代码块，自己解析  

必须只生成我要求的内容，不要生成任何多余的内容！  

## 方案设计  

### 核心业务流程  

我们发现程序要调用 AI 至少 2 次：  

1）生成关卡  
2）生成结果报告  


### 调研 AI 的能力能否满足需求  

调研过程中，需要不断优化给 AI 的提示词。  

可以利用 [阿里云百炼平台](https://bailian.console.aliyun.com/?) 的模型调试功能来验证对比 Prompt 和模型的效果，这里鱼皮为了追求效果，选择 Max 模型。  

#### 1、测试生成关卡的能力  

系统提示词：  

markdown  格式
我想做一个类似游戏的项目，帮助程序员朋友们提高需求分析、方案设计能力、技术的广度，快速了解到更多技术和方案，帮助用户评估当前的薪资水平（中国区域）。  
首先初始的用户薪资为 10000 元 / 月，用户可以进行闯关。  
每一个关卡都由 AI 生成，需要给出：  
1）把 AI 模拟成产品经理，需要给出一段尽可能清晰的需求描述（企业中真实的需求和业务场景）  
2）让 AI 给出很多个选项，选项包括但不限于技术名词、技术知识点、方案的实现细节、零碎的实现思路、实现项目的关键流程、开发环境、依赖等等（其中一部分是正确答案，另一部分是干扰项，至少 10 个以上）  
注意，关卡的难度根据用户当前的薪资决定，需要根据薪资动态调整难度，尽量符合中国企业招聘程序员的实际标准。  


用户提示词：  

markdown  格式
请你帮我生成一个关卡，我要验证你生成的效果。  


#### 2、测试生成结果的能力  

系统提示词：  

~~~markdown  
你是一位专业的程序员，请根据我提供的信息，帮我生成结果报告。目标是帮助程序员朋友们提高需求分析、方案设计能力、技术的广度，快速了解到更多技术和方案，帮助用户评估当前的薪资水平（中国区域）。  
  
## 需要根据的信息  
1. 当前的关卡的内容，包括关卡名称、关卡给出的需求描述（详细一些）  
2. 用户选择的选项  
3. 本关卡的正确选项  
4. 用户当前的薪资  
  
## 生成的结果报告需要包含：  
  
1. 本关卡用户作答的分数（满分 100 分）  
2. 给本次用户的作答一个评价（可以尽量幽默搞笑一些，比如升职加薪、减薪、直接开除、直接把公司给你等等）  
3. 调整用户当前的薪资（一个具体的加减数字）  
4. 基于用户当前的薪资给出一些投递公司的建议（注意，不要使用真实公司名称，可以使用化名，比如阿里巴巴可以改为“阿巴阿巴”，腾讯可以改为“企鹅大王”）  
5. 解释给出当前分数和评价的原因  
6. 列举出本关卡的标准答案  
7. 给出标准的、尽可能详细的关卡答案，包括企业中怎么实现这个需求，有什么样的标准的设计方案，应该运用哪些技术来实现，并且给出各个正确选项在实现中的作用（尽量使用自然语言来描述，语句通顺连贯）  
必须只生成我要求的内容，不要生成任何多余的内容！  
  
参考的自然语言风格：  
  
markdown  格式
为了提升用户体验，需要为工具调用支持流式输出能力，但是只流式输出工具调用的基本信息，让用户能看到 AI 调用了哪些工具，避免了复杂的拼接解析逻辑（不利于项目扩展）。  
由于不知道要生成多少个文件、以及文件的层级组织关系，需要使用工具调用来写入文件。工具调用中需要特别注意文件路径的处理。如果不使用工具调用，就要输出一大堆的代码块，自己解析  

~~~


用户提示词：  

markdown  格式
## 假设现在正在挑战的关卡信息  

### 关卡名称：在线书店管理系统  

#### 产品经理需求描述：  
我们正在开发一个在线书店管理系统，旨在为用户提供便捷的购书体验，并简化书店后台管理流程。系统需要支持以下核心功能：  
- 用户注册与登录  
- 浏览书籍列表（按类别、作者或出版社筛选）  
- 搜索特定书籍  
- 查看书籍详情页面（包括简介、价格等信息）  
- 将商品添加到购物车  
- 完成订单支付  
- 后台管理界面，用于更新库存、处理订单等  
  

此外，我们需要确保网站具有良好的用户体验，加载速度快，并且能够在不同设备上正常工作。  

---

#### 正确选项（请从下列选项中选择最合适的答案）：  

1. **前端框架** - React.js 或 Vue.js    
2. **后端语言** - Java 或 Python    
3. **数据库** - MySQL 或 PostgreSQL    
4. **版本控制工具** - Git    
5. **API 设计风格** - RESTful API    
6. **安全措施** - HTTPS 协议    
7. **缓存机制** - Redis    
8. **服务器部署** - Docker 容器化技术    
9. **搜索引擎优化** - 使用 SEO 友好的 URL 结构    
10. **响应式设计** - 使用 Bootstrap 或自定义 CSS 媒体查询    
11. **错误处理** - 在代码中实现 try-catch 语句    
12. **测试框架** - JUnit (Java) / PyTest (Python)    
13. **CI/CD 工具** - Jenkins 或 GitHub Actions    
14. **日志记录** - Log4j (Java) / logging module (Python)    

#### 干扰项：  
- 使用 C++ 作为后端开发语言  
- 直接在浏览器中存储敏感数据  
- 不使用任何版本控制系统  
- 仅支持 HTTP 协议  
- 手动管理依赖关系而不使用包管理器  
- 不对用户输入进行验证  
- 避免编写单元测试  
- 不考虑跨平台兼容性问题  
- 忽略性能优化  
  
## 用户提供的信息  

### 用户选择的选项  

1. 仅支持 HTTP 协议  
2. 手动管理依赖关系而不使用包管理器  
3. 不对用户输入进行验证  
4. 关注程序员鱼皮  

### 用户当前的薪资  

10000 元每月  


经过测试，我们发现 AI 能够满足当前需求，可以继续开发。  


### 提示词  

#### 1、生成关卡  

系统提示词：  

~~~markdown  
你是一位程序员专家和产品经理，你需要根据用户当前的薪资，生成关卡，目标是帮助程序员朋友们提高需求分析、方案设计能力、技术的广度，快速了解到更多技术和方案，帮助用户评估当前的薪资水平（中国区域）。  
  
## 你需要生成的内容  
  
1）关卡名称  
2）给出一段尽可能清晰详细的需求描述（企业中真实的需求和业务场景）  
3）给出很多个选项，选项包括但不限于技术名词、技术知识点、方案的实现细节、零碎的实现思路、实现项目的关键流程、开发环境、依赖等等（其中一部分是正确答案，另一部分是干扰项，至少 10 个以上）  
  
## 注意事项  
  
关卡的难度根据用户当前的薪资决定，需要根据薪资动态调整难度，尽量符合中国企业招聘程序员的实际标准。  
  
## 严格按照下列格式输出（JSON 格式）  
  
仅参考格式，不参考内容。  
  
json  格式
{  
  "levelName": "开发一个图书管理系统",  
  "levelDesc": "我们正在开发一个在线书店管理系统，旨在为用户提供便捷的购书体验，并简化书店后台管理流程。系统需要支持以下核心功能：  
  
用户注册与登录  
浏览书籍列表（按类别、作者或出版社筛选）  
搜索特定书籍  
查看书籍详情页面（包括简介、价格等信息）  
将商品添加到购物车  
完成订单支付  
后台管理界面，用于更新库存、处理订单等  
此外，我们需要确保网站具有良好的用户体验，加载速度快，并且能够在不同设备上正常工作。  
",  
  "options": [  
    {  
      "optionName": "Vue 框架",  
      "trueAnswer": true  
    },  
    {  
      "optionName": "Zookeeper 分布式协调工具",  
      "trueAnswer": false  
    },  
  ]  
}  
 
~~~


用户提示词：  

markdown  格式
当前薪资：{{salary:10000}}  

  

#### 2、生成结果报告  

系统提示词：  

~~~markdown  
你是一位程序员专家和产品经理，请根据我提供的信息，帮我生成《程序员闯关的结果报告》。目标是帮助程序员朋友们提高需求分析、方案设计能力、技术的广度，快速了解到更多技术和方案，帮助用户评估当前的薪资水平（中国区域）。  
  
## 需要根据的信息  
  
1. 当前的关卡的内容，包括关卡名称、关卡给出的需求描述（详细一些）  
2. 用户选择的选项  
3. 本关卡的正确选项  
4. 用户当前的薪资  
  
## 生成的结果报告必须有下列内容：  
  
1. 本关卡用户作答的分数（满分 100 分）  
2. 给本次用户的作答一个评价（可以尽量幽默搞笑一些，比如升职加薪、减薪、直接开除、直接把公司给你等等）  
3. 调整用户当前的薪资（一个具体的加减数字）  
4. 基于用户当前的薪资给出一些投递公司的建议（注意，一定不要使用真实公司名称和产品名称，可以使用化名，比如阿里巴巴可以改为“阿巴阿巴”，腾讯可以改为“企鹅大王”）  
5. 解释给出当前分数和评价的原因  
6. 列举出本关卡的正确选项  
7. 给出标准的、尽可能详细的关卡分析和解读，包括企业中怎么实现这个需求，有什么样的标准的设计方案，应该运用哪些技术来实现，并且给出各个正确选项在实现中的作用（尽量使用自然语言来描述，语句通顺连贯）  
必须只生成我要求的内容，不要生成任何多余的内容！  
  
参考的自然语言风格：  
  
markdown  格式
为了提升用户体验，需要为工具调用支持流式输出能力，但是只流式输出工具调用的基本信息，让用户能看到 AI 调用了哪些工具，避免了复杂的拼接解析逻辑（不利于项目扩展）。  
由于不知道要生成多少个文件、以及文件的层级组织关系，需要使用工具调用来写入文件。工具调用中需要特别注意文件路径的处理。如果不使用工具调用，就要输出一大堆的代码块，自己解析  

  
## 必须按照下列格式输出  
  
仅参考格式，不参考内容。  
  
json  格式
{  
  "score": 80,  
  "comment": "建议涨薪",  
  "salaryChange": -2000,  
  "suggest": "建议投递鱼皮公司",  
  "reason": "答的不太好",  
  "trueOptions": [  
    "Vue 框架",  
    "NPM 包管理器"  
  ],  
  "standardAnswer": "...一段 Markdown 文本"  
}  

~~~


用户提示词：  

~~~markdown  
### 关卡名称  
  
{{ levelName: 关卡名称 }}  
  
## 关卡的需求描述  
  
{{ levelDesc: 需求描述 }}  
  
## 用户选择的选项  
  
json  格式
[  
  {  
    "optionName": "Vue 框架",  
    "trueAnswer": true  
  },  
  {  
    "optionName": "Zookeeper 分布式协调工具",  
    "trueAnswer": false  
  },  
]  

  
### 本关卡的正确选项  
  
json  格式
[  
  "Vue 框架",  
  "NPM 包管理器"  
],  

  
### 用户当前的薪资  
  
{{ salary: 10000 }}  
~~~

### 技术选型  

### 后端  

- Java 21  
- Spring Boot 3.5  
- MySQL 数据库  
- MyBatis Plus 数据访问层  
- LangChain4j AI 开发框架  
- Lombok 注解生成库  
- Hutool 工具库  
- Knife4j 接口文档  
  
### 前端  

- Vue 框架  
  
### 库表设计  
  
sql  格式
-- 程序员技术练兵场数据库建表语句  
-- 数据库名：coder-test  
  
-- 创建数据库（如果不存在）  
CREATE  
    DATABASE IF NOT EXISTS `coder-test` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;  
  
USE  
    `coder-test`;  
  
-- 用户表  
CREATE TABLE `user`  
(  
    `id`         BIGINT       NOT NULL AUTO_INCREMENT COMMENT '主键',  
    `username`   VARCHAR(50)  NOT NULL COMMENT '用户名',  
    `password`   VARCHAR(255) NOT NULL COMMENT '密码（加密存储）',  
    `nickname`   VARCHAR(50) DEFAULT NULL COMMENT '用户昵称',  
    `salary`     INT         DEFAULT 10000 COMMENT '当前薪资（单位：元/月）',  
    `createTime` DATETIME    DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',  
    `updateTime` DATETIME    DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',  
    `isDelete`   TINYINT     DEFAULT 0 COMMENT '逻辑删除（0-未删除，1-已删除）',  
    PRIMARY KEY (`id`),  
    UNIQUE KEY `uk_username` (`username`),  
    KEY          `idx_createTime` (`createTime`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='用户表';  
  
-- 关卡表  
CREATE TABLE `level`  
(  
    `id`           BIGINT       NOT NULL AUTO_INCREMENT COMMENT '主键',  
    `levelName`    VARCHAR(200) NOT NULL COMMENT '关卡名称',  
    `levelDesc`    TEXT         NOT NULL COMMENT '关卡需求描述',  
    `options`      TEXT         NOT NULL COMMENT '关卡选项（JSON格式存储）',  
    `difficulty`   VARCHAR(200) NOT NULL COMMENT '难度等级（简单，中等，困难）',  
    `targetSalary` INT      DEFAULT 10000 COMMENT '目标薪资范围（用于难度匹配）',  
    `createTime`   DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',  
    `updateTime`   DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',  
    `isDelete`     TINYINT  DEFAULT 0 COMMENT '逻辑删除（0-未删除，1-已删除）',  
    PRIMARY KEY (`id`),  
    KEY            `idx_difficulty` (`difficulty`),  
    KEY            `idx_targetSalary` (`targetSalary`),  
    KEY            `idx_createTime` (`createTime`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='关卡表';  
  
-- 用户关卡表（记录用户闯关信息）  
CREATE TABLE `user_level`  
(  
    `id`             BIGINT NOT NULL AUTO_INCREMENT COMMENT '主键',  
    `userId`         BIGINT NOT NULL COMMENT '用户ID',  
    `levelId`        BIGINT NOT NULL COMMENT '关卡ID',  
    `userOptions`    TEXT   NOT NULL COMMENT '用户选择的选项（JSON格式存储）',  
    `score`          INT      DEFAULT 0 COMMENT '得分（0-100分）',  
    `comment`        TEXT     DEFAULT NULL COMMENT '评价',  
    `salaryChange`   INT      DEFAULT 0 COMMENT '薪资变化（正数为加薪，负数为减薪）',  
    `suggest`        TEXT     DEFAULT NULL COMMENT '公司投递建议',  
    `reason`         TEXT     DEFAULT NULL COMMENT '评分原因',  
    `trueOptions`    TEXT     DEFAULT NULL COMMENT '正确选项（JSON格式存储）',  
    `standardAnswer` TEXT     DEFAULT NULL COMMENT '标准答案解析',  
    `createTime`     DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',  
    `updateTime`     DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',  
    `isDelete`       TINYINT  DEFAULT 0 COMMENT '逻辑删除（0-未删除，1-已删除）',  
    PRIMARY KEY (`id`),  
    KEY              `idx_userId` (`userId`),  
    KEY              `idx_levelId` (`levelId`),  
    KEY              `idx_score` (`score`),  
    KEY              `idx_createTime` (`createTime`)  
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='用户关卡表';  
  
## 当前后端项目目录结构


  coder-practice-backend/
  ├── .claude/                          # Claude AI 配置文件
  │   ├── 1. BasicPrompt.md
  │   ├── 2. 任务执行计划.md
  │   ├── 3. AI功能开发提示词.md
  │   ├── settings.local.json
  │   └── picture/
  ├── .idea/                           # IntelliJ IDEA 配置文件
  ├── .mvn/                            # Maven 包装器
  ├── sql/                             # 数据库脚本
  │   └── V1__Create_database_tables.sql
  ├── src/                            # 源代码
  │   ├── main/
  │   │   ├── java/
  │   │   │   └── com/codebear/coderpracticebackend/
  │   │   │       ├── common/         # 通用类
  │   │   │       ├── config/         # 配置类
  │   │   │       ├── controller/     # 控制器
  │   │   │       ├── handler/        # 处理器
  │   │   │       ├── mapper/         # 数据访问层
  │   │   │       ├── model/          # 模型
  │   │   │       │   ├── dto/        # 数据传输对象
  │   │   │       │   │   ├── level/  # 等级相关DTO
  │   │   │       │   │   └── user/   # 用户相关DTO
  │   │   │       │   ├── entity/     # 实体类
  │   │   │       │   └── vo/         # 视图对象
  │   │   │       └── service/        # 服务层
  │   │   │           └── impl/        # 服务实现
  │   │   └── resources/
  │   │       ├── mapper/             # MyBatis 映射文件
  │   │       └── application.yaml    # 应用配置
  │   └── test/
  │       └── java/
  ├── target/                          # 构建输出目录
  ├── .gitattributes
  ├── .gitignore
  ├── CLAUDE.md
  ├── HELP.md
  ├── mvnw
  ├── mvnw.cmd
  └── pom.xml                          # Maven 配置文件

## 实现步骤  

你已经完成了库表设计，数据库已经全部实现了，并且后端基础功能开发也已经实现了，请继续帮我基于 Langchain4J 框架完成 AI 生成关卡、AI 生成报告等涉及到 AI 能力的开发，在编写方案计划和开发时，不要重复已经做过的事情，比如已经实现了数据库和基本后端开发，就不用再重复做这些事情了。


注意！本项目中可能会用到的 AI 特性如下，你必须读取这些在线文档的内容来获取 AI 框架的正确使用方法，禁止自行发挥。使用 context7 获取文档  
- 快速开始：https://docs.langchain4j.dev/get-started  
- 对接 AI 大模型：https://docs.langchain4j.dev/tutorials/chat-and-language-models  
- 结构化输出：https://docs.langchain4j.dev/tutorials/structured-outputs  
- 对接阿里大模型：https://docs.langchain4j.dev/integrations/language-models/dashscope  
- AI Service 的方式对接大模型：https://docs.langchain4j.dev/tutorials/ai-services  
- 和 Spring Boot 项目的整合：https://docs.langchain4j.dev/tutorials/spring-boot-integration  
- 流式输出：https://docs.langchain4j.dev/tutorials/response-streaming  

必须引入下列版本的依赖：  
xml  格式
<dependency>  
    <groupId>dev.langchain4j</groupId>  
    <artifactId>langchain4j-community-dashscope-spring-boot-starter</artifactId>  
    <version>1.4.0-beta10</version>  
</dependency>  
<dependency>  
    <groupId>dev.langchain4j</groupId>  
    <artifactId>langchain4j-reactor</artifactId>  
    <version>1.4.0-beta10</version>  
</dependency>  

注意：
1. 你可以重点关注代码中包含 TODO 注释的位置，这可能是需要利用 AI 来完成的功能。
2. 不需要的代码尽量不要修改和新建，请严格只完成需求中提到的功能，不要额外开发其它功能
   