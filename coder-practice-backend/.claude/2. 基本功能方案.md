# ã€Šç¨‹åºå‘˜æŠ€æœ¯ç»ƒå…µåœºã€‹åç«¯å¼€å‘ä»»åŠ¡æ‰§è¡Œè®¡åˆ’ï¼ˆæœ€å°å¯è¡Œç‰ˆï¼‰

## é¡¹ç›®æ¦‚è¿°

å¼€å‘ä¸€ä¸ªå¸®åŠ©ç¨‹åºå‘˜æé«˜éœ€æ±‚åˆ†æã€æ–¹æ¡ˆè®¾è®¡èƒ½åŠ›å’ŒæŠ€æœ¯å¹¿åº¦çš„åœ¨çº¿é—¯å…³å¹³å°ï¼Œåç«¯æä¾›æœ€åŸºç¡€çš„ç”¨æˆ·ã€å…³å¡ã€é—¯å…³ APIã€‚

## å¼€å‘ç›®æ ‡

- å®ç°ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ç™»å‡ºï¼ŒåŸºäº session å­˜å‚¨ç™»å½•æ€
- åœ¨éœ€è¦ç”¨æˆ·èº«ä»½çš„æ¥å£ä¸­ï¼Œç›´æ¥é€šè¿‡ `session.getAttribute("user")` åˆ¤æ–­æ˜¯å¦ç™»å½•
- å®ç°å…³å¡è·å–ã€ç­”é¢˜æäº¤ã€å†å²è®°å½•æŸ¥è¯¢çš„æ ¸å¿ƒåŠŸèƒ½

## æŠ€æœ¯æ ˆ

- Spring Boot
- MyBatis Plusï¼ˆCRUD + åˆ†é¡µï¼‰
- MySQL
- Sessionï¼ˆSpring Boot å†…ç½®ï¼Œä¸åŠ é¢å¤–ä¾èµ–ï¼‰

## å¼€å‘ä»»åŠ¡æ¸…å•

### 1. æ•°æ®åº“è¡¨

âœ… å·²å®Œæˆï¼ŒSQL åœ¨ `sql/V1__Create_database_tables.sql`

### 2. å®ä½“ç±»

- `User.java`
- `Level.java`
- `UserLevel.java`

> ğŸ‘‰ å­—æ®µå’Œæ•°æ®åº“ä¸€ä¸€å¯¹åº”ï¼ŒMyBatis Plus è‡ªåŠ¨æ˜ å°„

### 3. å°è£…ç±»

#### ç»Ÿä¸€å“åº”
- `Result<T>`ï¼šç»Ÿä¸€å“åº”ï¼ˆcodeã€msgã€dataï¼‰

#### DTO
- `UserRegisterDTO`ï¼ˆç”¨æˆ·åã€å¯†ç ã€æ˜µç§°ï¼‰
- `UserLoginDTO`ï¼ˆç”¨æˆ·åã€å¯†ç ï¼‰
- `SubmitAnswerDTO`ï¼ˆlevelIdã€userOptionsï¼‰
- åˆ†é¡µè¯·æ±‚ DTO

### 4. Mapper å±‚

- `UserMapper`
- `LevelMapper`
- `UserLevelMapper`

> ç»§æ‰¿ BaseMapperï¼Œæ”¯æŒ MyBatis Plus CRUD

### 5. Service å±‚

#### UserService
- `register(UserRegisterDTO dto)`ï¼šæ³¨å†Œç”¨æˆ·ï¼ˆç”¨æˆ·åå”¯ä¸€æ ¡éªŒï¼Œå¯†ç åŠ å¯†å­˜å‚¨ï¼‰
- `login(UserLoginDTO dto, HttpSession session)`ï¼šæ ¡éªŒè´¦å·å¯†ç ï¼ŒæˆåŠŸåˆ™å†™å…¥ `session.setAttribute("user", user)`
- `logout(HttpSession session)`ï¼š`session.invalidate()` æ³¨é”€ç™»å½•
- `getCurrentUser(HttpSession session)`ï¼šè¿”å›å½“å‰ç™»å½•ç”¨æˆ·

#### LevelService
- `getLevelList(PageRequestDTO dto)`ï¼šåˆ†é¡µæŸ¥è¯¢å…³å¡
- `getLevelByDifficulty(String difficulty)`ï¼šæŒ‰éš¾åº¦æŸ¥è¯¢å…³å¡

#### UserLevelService
- `submitAnswer(Long userId, SubmitAnswerDTO dto)`ï¼šè®¡ç®—å¾—åˆ†å¹¶å­˜å‚¨
- `getUserHistory(Long userId)`ï¼šæŸ¥è¯¢ç”¨æˆ·é—¯å…³å†å²

### 6. Controller å±‚

#### UserController
- `POST /api/user/register` - æ³¨å†Œ
- `POST /api/user/login` - ç™»å½•ï¼ˆæˆåŠŸåå­˜ sessionï¼‰
- `POST /api/user/logout` - ç™»å‡ºï¼ˆæ¸…ç©º sessionï¼‰
- `GET /api/user/current` - è·å–å½“å‰ç™»å½•ç”¨æˆ·

#### LevelController
- `GET /api/level/list` - è·å–å…³å¡åˆ—è¡¨ï¼ˆæ— éœ€ç™»å½•ï¼‰
- `GET /api/level/difficulty/{difficulty}` - è·å–æŸä¸ªéš¾åº¦çš„å…³å¡ï¼ˆéœ€ç™»å½•ï¼ŒController å†…åˆ¤æ–­ `session.getAttribute("user")`ï¼‰

#### UserLevelController
- `POST /api/user-level/submit` - æäº¤ç­”æ¡ˆï¼ˆéœ€ç™»å½•ï¼Œåˆ¤æ–­ sessionï¼‰
- `GET /api/user-level/history` - è·å–é—¯å…³å†å²ï¼ˆéœ€ç™»å½•ï¼Œåˆ¤æ–­ sessionï¼‰

### 7. ç™»å½•æ€éªŒè¯ï¼ˆç®€åŒ–ç‰ˆï¼‰

- ä¸ä½¿ç”¨æ‹¦æˆªå™¨
- åœ¨ç”¨æˆ·æœåŠ¡ä¸­å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè·å–ç™»å½•æ€ï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°åˆ™æŠ›å‡ºæœªç™»å½•å¼‚å¸¸

> é€»è¾‘æœ€ç›´è§‚ï¼Œç¬¦åˆæœ€å°å¯è¡Œæ€§

## å¼€å‘é¡ºåº

1. æ•°æ®åº“é…ç½® & å®ä½“ç±»
2. å°è£…ç±»ï¼ˆResultã€DTOï¼‰
3. Mapper å±‚ï¼ˆMyBatis Plus åŸºç¡€ CRUDï¼‰
4. UserServiceï¼ˆæ³¨å†Œã€ç™»å½•ã€ç™»å‡ºï¼‰
5. LevelService & UserLevelService
6. Controller å±‚ï¼ˆç›´æ¥ç”¨ session åˆ¤æ–­ç™»å½•æ€ï¼‰
7. ç®€å•è”è°ƒ

## é¡¹ç›®ç»“æ„

```
src/main/java/com/codebear/coderpracticebackend/
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”œâ”€â”€ Level.java
â”‚   â”‚   â””â”€â”€ UserLevel.java
â”‚   â””â”€â”€ dto/
â”‚       â”œâ”€â”€ user/
â”‚       â”‚   â”œâ”€â”€ UserLoginDTO.java
â”‚       â”‚   â””â”€â”€ UserRegisterDTO.java
â”‚       â””â”€â”€ level/
â”‚           â””â”€â”€ SubmitAnswerDTO.java
â”œâ”€â”€ common/
â”‚   â””â”€â”€ Result.java
â”œâ”€â”€ mapper/
â”‚   â”œâ”€â”€ UserMapper.java
â”‚   â”œâ”€â”€ LevelMapper.java
â”‚   â””â”€â”€ UserLevelMapper.java
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ UserService.java
â”‚   â”œâ”€â”€ impl/UserServiceImpl.java
â”‚   â”œâ”€â”€ LevelService.java
â”‚   â”œâ”€â”€ impl/LevelServiceImpl.java
â”‚   â”œâ”€â”€ UserLevelService.java
â”‚   â””â”€â”€ impl/UserLevelServiceImpl.java
â””â”€â”€ controller/
    â”œâ”€â”€ UserController.java
    â”œâ”€â”€ LevelController.java
    â””â”€â”€ UserLevelController.java
```